<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triangle Ice Breaker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;600&display=swap');
        
        body {
            font-family: 'Fredoka', sans-serif;
            background: linear-gradient(135deg, #e0f2fe 0%, #f0f9ff 100%);
        }

        .canvas-container {
            background-image: radial-gradient(#cbd5e1 1px, transparent 1px);
            background-size: 20px 20px;
        }
        
        .btn-press {
            transition: transform 0.1s, box-shadow 0.1s;
        }
        .btn-press:active {
            transform: translateY(2px);
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
        }

        input:focus {
            ring: 2px solid #6366f1;
            border-color: #6366f1;
        }

        /* Shine effect for success */
        @keyframes shine {
            0% { box-shadow: 0 0 0 0 rgba(52, 211, 153, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(52, 211, 153, 0); }
            100% { box-shadow: 0 0 0 0 rgba(52, 211, 153, 0); }
        }
        .success-pulse {
            animation: shine 1.5s infinite;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4 text-slate-700">

    <div class="max-w-2xl w-full bg-white rounded-3xl shadow-xl overflow-hidden border-4 border-white">
        <!-- Header -->
        <div class="bg-indigo-600 p-6 text-center relative overflow-hidden">
            <h1 class="text-3xl font-bold text-white mb-2 relative z-10"><i class="fas fa-pencil-ruler mr-2"></i>Triangle Ba ni siya?</h1>
            <p class="text-indigo-100 opacity-90 relative z-10">Fill in the blanks to create a <b>Right Triangle</b>!</p>
            
            <!-- Background Decoration -->
            <div class="absolute top-0 left-0 w-full h-full opacity-10">
                <i class="fas fa-shapes absolute text-6xl top-4 left-10 transform rotate-12"></i>
                <i class="fas fa-play absolute text-6xl bottom-4 right-10 transform -rotate-12"></i>
            </div>
        </div>

        <!-- Controls -->
        <div class="p-6 bg-slate-50 border-b border-slate-100">
            
            <!-- Input Blanks -->
            <div class="flex justify-center gap-2 md:gap-4 mb-6">
                <div class="flex flex-col items-center">
                    <label class="text-xs font-bold text-slate-400 mb-1">Angle A</label>
                    <input type="number" id="angleA" class="w-16 md:w-20 p-3 text-center text-xl font-bold outline-none rounded-xl border-2 border-slate-200 text-indigo-600 focus:border-indigo-500 transition-colors" placeholder="?">
                </div>
                <div class="text-xl md:text-2xl font-bold text-slate-300 mt-8">+</div>
                <div class="flex flex-col items-center">
                    <label class="text-xs font-bold text-slate-400 mb-1">Angle B</label>
                    <input type="number" id="angleB" class="w-16 md:w-20 p-3 text-center text-xl font-bold outline-none rounded-xl border-2 border-slate-200 text-indigo-600 focus:border-indigo-500 transition-colors" placeholder="?">
                </div>
                <div class="text-xl md:text-2xl font-bold text-slate-300 mt-8">+</div>
                <div class="flex flex-col items-center">
                    <label class="text-xs font-bold text-slate-400 mb-1">Angle C</label>
                    <input type="number" id="angleC" class="w-16 md:w-20 p-3 text-center text-xl font-bold outline-none rounded-xl border-2 border-slate-200 text-indigo-600 focus:border-indigo-500 transition-colors" placeholder="?">
                </div>
                <div class="text-xl md:text-2xl font-bold text-slate-300 mt-8">=</div>
                <div class="flex flex-col items-center justify-end pb-3">
                    <span class="text-xl font-bold text-slate-500">180°</span>
                </div>
            </div>

            <!-- Tools & Actions -->
            <div class="flex flex-col md:flex-row gap-4 items-center justify-between bg-white p-4 rounded-xl shadow-sm border border-slate-200">
                
                <div class="flex flex-wrap items-center gap-2">
                    <span class="text-sm font-bold text-slate-400 mr-1 hidden sm:inline">Tools:</span>
                    <button onclick="fillNext(30)" class="btn-press bg-amber-100 hover:bg-amber-200 text-amber-700 font-bold py-1 px-3 rounded-lg border border-amber-200 text-sm">30°</button>
                    <button onclick="fillNext(45)" class="btn-press bg-emerald-100 hover:bg-emerald-200 text-emerald-700 font-bold py-1 px-3 rounded-lg border border-emerald-200 text-sm">45°</button>
                    <button onclick="fillNext(60)" class="btn-press bg-rose-100 hover:bg-rose-200 text-rose-700 font-bold py-1 px-3 rounded-lg border border-rose-200 text-sm">60°</button>
                    <button onclick="fillNext(90)" class="btn-press bg-indigo-100 hover:bg-indigo-200 text-indigo-700 font-bold py-1 px-3 rounded-lg border border-indigo-200 text-sm">90°</button>
                </div>

                <div class="flex gap-2 w-full md:w-auto">
                    <button onclick="clearInputs()" class="text-slate-400 hover:text-slate-600 px-3 py-2 font-bold text-sm">Clear</button>
                    <button onclick="triggerDraw()" id="buildBtn" class="flex-1 md:flex-none bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-6 rounded-xl shadow-md transition-colors flex items-center justify-center gap-2">
                        <i class="fas fa-play"></i> Build
                    </button>
                </div>
            </div>
        </div>

        <!-- Visualization Area -->
        <div class="relative w-full h-80 canvas-container bg-slate-50 flex items-center justify-center overflow-hidden">
            <!-- Main Drawing Canvas -->
            <canvas id="triangleCanvas" class="relative z-10"></canvas>
            
            <!-- Confetti Overlay Canvas -->
            <canvas id="confettiCanvas" class="absolute inset-0 z-20 pointer-events-none"></canvas>
            
            <!-- Labels Overlay -->
            <div id="labelsContainer" class="absolute inset-0 pointer-events-none z-30"></div>
            
            <!-- Error Toast -->
            <div id="errorToast" class="absolute top-4 left-1/2 transform -translate-x-1/2 bg-red-100 text-red-600 px-4 py-2 rounded-full text-sm font-bold shadow-sm border border-red-200 hidden z-40 transition-all">
                <i class="fas fa-exclamation-circle mr-1"></i> Angles must add up to 180°
            </div>
        </div>

        <!-- Result Card -->
        <div class="p-6 bg-white border-t border-slate-100 min-h-[140px]">
            <div id="resultBox" class="hidden transform transition-all duration-500 translate-y-4 opacity-0">
                <div class="flex items-center flex-wrap gap-3 mb-2">
                    <h2 id="triangleTitle" class="text-2xl font-bold text-indigo-700">Triangle Name</h2>
                    <span id="successBadge" class="hidden bg-green-100 text-green-700 px-2 py-1 rounded text-xs font-bold border border-green-200">SUCCESS!</span>
                </div>
                <p id="triangleDesc" class="text-slate-600 leading-relaxed">Description of the triangle.</p>
                <div class="mt-4 flex gap-2">
                    <span id="tag1" class="px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-xs font-bold uppercase tracking-wider">Type</span>
                    <span id="tag2" class="px-3 py-1 bg-slate-100 text-slate-600 rounded-full text-xs font-bold uppercase tracking-wider">Angle</span>
                </div>
            </div>
            
            <div id="emptyState" class="text-center py-4 opacity-50">
                <i class="fas fa-ruler-combined text-4xl mb-2 text-slate-300"></i>
                <p>Enter 3 angles to build.</p>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('triangleCanvas');
        const ctx = canvas.getContext('2d');
        const confettiCanvas = document.getElementById('confettiCanvas');
        const cCtx = confettiCanvas.getContext('2d');
        
        const inputs = [
            document.getElementById('angleA'),
            document.getElementById('angleB'),
            document.getElementById('angleC')
        ];
        const resultBox = document.getElementById('resultBox');
        const emptyState = document.getElementById('emptyState');
        const labelsContainer = document.getElementById('labelsContainer');
        const errorToast = document.getElementById('errorToast');
        const buildBtn = document.getElementById('buildBtn');

        // --- Layout & Initialization ---

        function resizeCanvas() {
            const parent = canvas.parentElement;
            canvas.width = parent.clientWidth;
            canvas.height = parent.clientHeight;
            confettiCanvas.width = parent.clientWidth;
            confettiCanvas.height = parent.clientHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        // --- Interaction Logic ---

        function fillNext(val) {
            for(let input of inputs) {
                if(!input.value) {
                    input.value = val;
                    input.focus();
                    return;
                }
            }
            // Overwrite current or last if full
            if (document.activeElement && document.activeElement.tagName === 'INPUT') {
                document.activeElement.value = val;
            } else {
                inputs[2].value = val;
            }
        }

        function clearInputs() {
            inputs.forEach(i => i.value = '');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            cCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height); // Stop confetti visual
            particles = []; // Stop logic
            labelsContainer.innerHTML = '';
            resultBox.classList.add('hidden');
            emptyState.style.display = 'block';
            emptyState.innerHTML = `<i class="fas fa-ruler-combined text-4xl mb-2 text-slate-300"></i><p>Enter 3 angles to build.</p>`;
            errorToast.classList.add('hidden');
            inputs[0].focus();
            buildBtn.classList.remove('success-pulse', 'bg-emerald-500', 'hover:bg-emerald-600');
            buildBtn.classList.add('bg-indigo-600', 'hover:bg-indigo-700');
        }

        function triggerDraw() {
            const A = parseFloat(inputs[0].value) || 0;
            const B = parseFloat(inputs[1].value) || 0;
            const C = parseFloat(inputs[2].value) || 0;

            const sum = A + B + C;
            
            errorToast.classList.add('hidden');

            if (sum < 179 || sum > 181) { 
                showError(`Sum is ${sum}°. Must be exactly 180°!`);
                return;
            }

            if (A <= 0 || B <= 0 || C <= 0) {
                showError("All angles must be greater than 0°.");
                return;
            }

            drawTriangle(A, B, C);
        }

        function showError(msg) {
            errorToast.innerHTML = `<i class="fas fa-exclamation-circle mr-1"></i> ${msg}`;
            errorToast.classList.remove('hidden');
            errorToast.style.transform = 'translate(-50%, 0) scale(1.05)';
            setTimeout(() => errorToast.style.transform = 'translate(-50%, 0) scale(1)', 100);
        }

        // --- Drawing Logic ---

        function drawTriangle(angleA, angleB, angleC) {
            // Logic Analysis
            const angles = [angleA, angleB, angleC];
            const maxAngle = Math.max(...angles);
            const hasRight = angles.some(a => Math.abs(a - 90) < 0.1);
            
            let title = "Scalene Triangle";
            let desc = "All sides and angles are different.";
            let tags = ["Scalene"];
            let color = "#6366f1"; // Default indigo
            let isSuccess = false;

            const uniqueAngles = new Set(angles).size;
            
            if (uniqueAngles === 1) {
                title = "Equilateral Triangle";
                desc = "This is a perfect Equilateral Triangle! However, the goal is to build a Right Triangle. Try using 90° as one of your angles.";
                tags = ["Regular", "Equilateral"];
                color = "#fb7185"; // Rose
            } else if (uniqueAngles === 2) {
                title = "Isosceles Triangle";
                desc = "Two angles are equal, meaning two sides are equal.";
                tags = ["Isosceles"];
                color = "#fbbf24"; // Amber
            }

            if (hasRight) {
                title = uniqueAngles === 2 ? "Right Isosceles Triangle" : "Right Triangle";
                desc = "You did it! It has a 90° angle.";
                tags.push("Right");
                color = "#34d399"; // Emerald
                isSuccess = true;
                
                // Trigger Celebration
                fireConfetti();
                buildBtn.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
                buildBtn.classList.add('bg-emerald-500', 'hover:bg-emerald-600', 'success-pulse');
            } else {
                // Clear confetti if not success
                particles = [];
                cCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
                buildBtn.classList.add('bg-indigo-600', 'hover:bg-indigo-700');
                buildBtn.classList.remove('bg-emerald-500', 'hover:bg-emerald-600', 'success-pulse');

                if (maxAngle > 90) {
                    title = title.replace("Triangle", "") + "(Obtuse)";
                    desc = `It has a wide angle of ${maxAngle}°.`;
                    tags.push("Obtuse");
                } else {
                    tags.push("Acute");
                    if (!title.includes("Equilateral")) {
                        desc = "All angles are sharp (less than 90°).";
                    }
                }
            }

            // Canvas Drawing
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            labelsContainer.innerHTML = '';

            const padding = 40;
            const w = canvas.width;
            const h = canvas.height;
            const maxW = w - padding * 2;
            const maxH = h - padding * 2;

            // Math
            let c_len = 200; 
            const radA = angleA * (Math.PI / 180);
            const radB = angleB * (Math.PI / 180);
            const radC = angleC * (Math.PI / 180);
            const a_len = (c_len * Math.sin(radA)) / Math.sin(radC);
            const b_len = (c_len * Math.sin(radB)) / Math.sin(radC);

            let Ax, Ay, Bx, By, Cx, Cy;

            // Axis Alignment for clean lines
            if (Math.abs(angleA - 90) < 0.1) {
                Ax = 0; Ay = 0; Cx = 0; Cy = b_len; Bx = c_len; By = 0;
            } else if (Math.abs(angleB - 90) < 0.1) {
                Bx = 0; By = 0; Ax = 0; Ay = c_len; Cx = a_len; Cy = 0;
            } else if (Math.abs(angleC - 90) < 0.1) {
                Cx = 0; Cy = 0; Ax = 0; Ay = b_len; Bx = a_len; By = 0;
            } else {
                Ax = 0; Ay = 0; Bx = c_len; By = 0;
                Cx = b_len * Math.cos(radA);
                Cy = b_len * Math.sin(radA);
            }

            const minX = Math.min(Ax, Bx, Cx);
            const maxX = Math.max(Ax, Bx, Cx);
            const minY = Math.min(Ay, By, Cy);
            const maxY = Math.max(Ay, By, Cy);
            
            const triW = maxX - minX;
            const triH = maxY - minY;

            const scaleX = triW > 0 ? maxW / triW : 1;
            const scaleY = triH > 0 ? maxH / triH : 1;
            const scale = Math.min(scaleX, scaleY) * 0.85;

            const offsetX = (w - triW * scale) / 2 - minX * scale;
            const offsetY = (h - triH * scale) / 2 - minY * scale;

            const sAx = Ax * scale + offsetX;
            const sAy = h - (Ay * scale + offsetY);
            const sBx = Bx * scale + offsetX;
            const sBy = h - (By * scale + offsetY);
            const sCx = Cx * scale + offsetX;
            const sCy = h - (Cy * scale + offsetY);

            ctx.beginPath();
            ctx.moveTo(sAx, sAy);
            ctx.lineTo(sBx, sBy);
            ctx.lineTo(sCx, sCy);
            ctx.closePath();

            ctx.lineWidth = 5;
            ctx.strokeStyle = color;
            ctx.lineJoin = 'round';
            ctx.stroke();

            ctx.fillStyle = color + "20";
            ctx.fill();

            if(Math.abs(angleA - 90) < 1) drawRightAngle(ctx, sAx, sAy, sBx, sBy, sCx, sCy, color);
            if(Math.abs(angleB - 90) < 1) drawRightAngle(ctx, sBx, sBy, sCx, sCy, sAx, sAy, color);
            if(Math.abs(angleC - 90) < 1) drawRightAngle(ctx, sCx, sCy, sAx, sAy, sBx, sBy, color);

            createLabel(sAx, sAy, `${angleA}°`, "bottom-left");
            createLabel(sBx, sBy, `${angleB}°`, "bottom-right");
            createLabel(sCx, sCy, `${angleC}°`, "top");

            updateUI(title, desc, tags, color, isSuccess);
        }

        function drawRightAngle(ctx, x, y, x1, y1, x2, y2, color) {
            const size = 15;
            const dx1 = x1 - x; const dy1 = y1 - y;
            const dx2 = x2 - x; const dy2 = y2 - y;
            const len1 = Math.sqrt(dx1*dx1 + dy1*dy1);
            const len2 = Math.sqrt(dx2*dx2 + dy2*dy2);
            const px1 = x + (dx1/len1) * size;
            const py1 = y + (dy1/len1) * size;
            const px2 = x + (dx2/len2) * size;
            const py2 = y + (dy2/len2) * size;
            const px3 = px1 + (dx2/len2) * size;
            const py3 = py1 + (dy2/len2) * size;
            ctx.beginPath();
            ctx.moveTo(px1, py1);
            ctx.lineTo(px3, py3);
            ctx.lineTo(px2, py2);
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            ctx.stroke();
        }

        function createLabel(x, y, text, position) {
            const el = document.createElement('div');
            el.className = 'absolute bg-white px-2 py-1 rounded shadow text-xs font-bold text-slate-600 border border-slate-200';
            el.innerText = text;
            let top = y; let left = x;
            if (position === "top") { top -= 45; left -= 15; }
            else if (position === "bottom-left") { top += 10; left -= 30; }
            else if (position === "bottom-right") { top += 10; left += 0; }
            el.style.top = `${top}px`;
            el.style.left = `${left}px`;
            el.style.opacity = '0';
            el.style.transition = 'opacity 0.3s ease-in 0.1s';
            labelsContainer.appendChild(el);
            setTimeout(() => el.style.opacity = '1', 50);
        }

        function updateUI(title, desc, tags, color, isSuccess) {
            emptyState.style.display = 'none';
            resultBox.classList.remove('hidden');
            resultBox.style.opacity = '0';
            resultBox.style.transform = 'translateY(10px)';
            
            setTimeout(() => {
                resultBox.style.opacity = '1';
                resultBox.style.transform = 'translateY(0)';
            }, 50);

            const titleEl = document.getElementById('triangleTitle');
            titleEl.innerText = title;
            titleEl.style.color = color;
            document.getElementById('triangleDesc').innerText = desc;
            
            const badge = document.getElementById('successBadge');
            if (isSuccess) {
                badge.classList.remove('hidden');
                badge.className = `px-2 py-1 rounded text-xs font-bold border border-green-200 bg-emerald-100 text-emerald-700 ml-auto md:ml-2`;
                badge.innerText = "SUCCESS! RIGHT TRIANGLE";
            } else {
                badge.classList.add('hidden');
            }
            
            const tag1 = document.getElementById('tag1');
            const tag2 = document.getElementById('tag2');
            tag1.innerText = tags[0];
            tag1.style.color = color;
            tag1.style.backgroundColor = color + "20"; 
            if (tags[1]) {
                tag2.style.display = 'inline-block';
                tag2.innerText = tags[1];
            } else {
                tag2.style.display = 'none';
            }
        }

        // --- Confetti System ---
        let particles = [];
        let animationId;

        function fireConfetti() {
            // Reset
            particles = [];
            cCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
            cancelAnimationFrame(animationId);
            
            // Create burst
            const colors = ['#f43f5e', '#10b981', '#3b82f6', '#f59e0b', '#8b5cf6'];
            const count = 100;
            const cx = confettiCanvas.width / 2;
            const cy = confettiCanvas.height / 2;

            for(let i=0; i<count; i++) {
                particles.push({
                    x: cx,
                    y: cy,
                    vx: (Math.random() - 0.5) * 15,
                    vy: (Math.random() - 1.5) * 15,
                    size: Math.random() * 8 + 4,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    life: 1,
                    decay: Math.random() * 0.02 + 0.01,
                    rotation: Math.random() * 360,
                    rotationSpeed: (Math.random() - 0.5) * 10
                });
            }
            animateConfetti();
        }

        function animateConfetti() {
            cCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
            let alive = false;
            
            particles.forEach((p, index) => {
                if(p.life > 0) {
                    alive = true;
                    // Physics
                    p.x += p.vx;
                    p.y += p.vy;
                    p.vy += 0.3; // Gravity
                    p.life -= p.decay;
                    p.rotation += p.rotationSpeed;
                    
                    // Draw
                    cCtx.save();
                    cCtx.translate(p.x, p.y);
                    cCtx.rotate(p.rotation * Math.PI / 180);
                    cCtx.fillStyle = p.color;
                    cCtx.globalAlpha = p.life;
                    cCtx.fillRect(-p.size/2, -p.size/2, p.size, p.size);
                    cCtx.restore();
                }
            });

            if(alive) {
                animationId = requestAnimationFrame(animateConfetti);
            }
        }
    </script>
</body>
</html>